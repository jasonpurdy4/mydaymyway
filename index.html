<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Day, My Way</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #FF4F00 0%, #FF8C00 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 360px;
            width: 100%;
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 22px;
            color: #333;
        }

        .slider-group {
            margin-bottom: 20px;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .slider-label {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .slider-value {
            font-size: 18px;
            font-weight: 700;
        }

        .exercise .slider-value { color: #FF4F00; }
        .screen .slider-value { color: #FF4F00; }
        .sugar .slider-value { color: #FF4F00; }

        .options {
            display: flex;
            gap: 8px;
        }

        .option {
            flex: 1;
            padding: 12px 8px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            color: #666;
            transition: all 0.2s;
        }

        .option:hover {
            border-color: #FFB380;
            background: #FFF4EC;
        }

        .option.selected {
            border-color: #FF4F00;
            background: #FFF0E6;
            color: #CC3F00;
            font-weight: 700;
        }

        .exercise .option.selected {
            border-color: #FF4F00;
            background: #FFF0E6;
            color: #CC3F00;
        }

        .screen .option.selected {
            border-color: #FF4F00;
            background: #FFF0E6;
            color: #CC3F00;
        }

        .sugar .option.selected {
            border-color: #FF4F00;
            background: #FFF0E6;
            color: #CC3F00;
        }

        .reset-btn {
            display: block;
            width: 100%;
            margin-top: 16px;
            padding: 12px;
            font-size: 14px;
            color: #FF4F00;
            background: #FFF0E6;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        .reset-btn:hover {
            background: #FFE0CC;
        }

        .error-msg {
            margin-top: 16px;
            padding: 12px;
            background: #fef2f2;
            border-radius: 12px;
            border: 1px solid #fecaca;
            text-align: center;
            font-size: 13px;
            color: #991b1b;
            display: none;
        }

        .error-msg.show {
            display: block;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .screen-warning {
            margin-top: 8px;
            padding: 8px;
            background: #fef3cd;
            border-radius: 8px;
            border: 1px solid #ffc107;
            text-align: center;
            font-size: 12px;
            color: #856404;
            display: none;
        }

        .screen-warning.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ú® My Day, My Way ‚ú®</h1>
        </div>

        <!-- Exercise -->
        <div class="slider-group exercise">
            <div class="slider-header">
                <span class="slider-label">üèÉ Outside Time</span>
                <span class="slider-value" id="exercise-value">30 min</span>
            </div>
            <div class="options" id="exercise-options">
                <div class="option" data-value="0">0</div>
                <div class="option selected" data-value="30">30m</div>
                <div class="option" data-value="45">45m</div>
                <div class="option" data-value="60">1hr</div>
                <div class="option" data-value="75">1:15</div>
                <div class="option" data-value="90">1:30</div>
            </div>
        </div>

        <!-- Screen Time -->
        <div class="slider-group screen">
            <div class="slider-header">
                <span class="slider-label">üéÆ Screen Time</span>
                <span class="slider-value" id="screen-value">2 hours</span>
            </div>
            <div class="options" id="screen-options">
                <div class="option" data-value="0">0</div>
                <div class="option selected" data-value="120">2hr</div>
                <div class="option" data-value="150">2.5hr</div>
                <div class="option" data-value="180">3hr</div>
                <div class="option" data-value="210">3.5hr</div>
            </div>
            <div class="screen-warning" id="screen-warning">
                ‚ö†Ô∏è Take a break every 2 hours!
            </div>
        </div>

        <!-- Cookies -->
        <div class="slider-group sugar">
            <div class="slider-header">
                <span class="slider-label">üç™ Cookies</span>
                <span class="slider-value" id="sugar-value">1</span>
            </div>
            <div class="options" id="sugar-options">
                <div class="option" data-value="0">0</div>
                <div class="option selected" data-value="1">1</div>
                <div class="option" data-value="2">2</div>
                <div class="option" data-value="3">3</div>
                <div class="option" data-value="4">4</div>
            </div>
        </div>

        <div class="error-msg" id="error">
            Already at max exercise! Reduce cookies or screen time first.
        </div>

        <button class="reset-btn" onclick="reset()">Reset</button>
    </div>

    <script>
        // Exercise costs:
        // Screen: 0=0, 2hr=15min, 2.5hr=22min, 3hr=30min, 3.5hr=37min
        // Cookies: 0=0, 1=15min, 2=30min, 3=45min, 4=60min

        const SCREEN_COST = { 0: 0, 120: 15, 150: 22, 180: 30, 210: 37 };
        const COOKIE_COST = { 0: 0, 1: 15, 2: 30, 3: 45, 4: 60 };
        const EXERCISE_OPTIONS = [0, 30, 45, 60, 75, 90];

        let state = {
            exercise: 30,
            screen: 120,
            sugar: 1
        };

        function init() {
            document.querySelectorAll('#screen-options .option').forEach(opt => {
                opt.addEventListener('click', () => selectScreen(parseInt(opt.dataset.value)));
            });
            document.querySelectorAll('#sugar-options .option').forEach(opt => {
                opt.addEventListener('click', () => selectSugar(parseInt(opt.dataset.value)));
            });
            document.querySelectorAll('#exercise-options .option').forEach(opt => {
                opt.addEventListener('click', () => selectExercise(parseInt(opt.dataset.value)));
            });
            render();
        }

        const SCREEN_OPTIONS = [0, 120, 150, 180, 210];
        const COOKIE_OPTIONS = [0, 1, 2, 3, 4];
        const MAX_EXERCISE = 90;

        function showError() {
            const error = document.getElementById('error');
            error.classList.remove('show');
            // Trigger reflow to restart animation
            void error.offsetWidth;
            error.classList.add('show');
            setTimeout(() => error.classList.remove('show'), 3000);
        }

        function selectScreen(value) {
            const oldScreen = state.screen;

            if (value > oldScreen) {
                // More screen time (bad) ‚Üí need more exercise
                const extraCost = SCREEN_COST[value] - SCREEN_COST[oldScreen];
                const newExercise = state.exercise + extraCost;

                if (newExercise > MAX_EXERCISE) {
                    showError();
                    return; // Reject the change
                }

                state.screen = value;
                adjustExercise(extraCost);
            } else {
                state.screen = value;
            }
            render();
        }

        function selectSugar(value) {
            const oldSugar = state.sugar;

            if (value > oldSugar) {
                // More cookies (bad) ‚Üí need more exercise
                const extraCost = COOKIE_COST[value] - COOKIE_COST[oldSugar];
                const newExercise = state.exercise + extraCost;

                if (newExercise > MAX_EXERCISE) {
                    showError();
                    return; // Reject the change
                }

                state.sugar = value;
                adjustExercise(extraCost);
            } else if (value < oldSugar) {
                // Less cookies (good) ‚Üí reward with more screen time
                state.sugar = value;
                const savedExercise = COOKIE_COST[oldSugar] - COOKIE_COST[value];
                adjustScreen(savedExercise);
            } else {
                state.sugar = value;
            }
            render();
        }

        function selectExercise(value) {
            const oldExercise = state.exercise;
            state.exercise = value;

            if (value > oldExercise) {
                // More exercise (good) ‚Üí reward with more screen time
                adjustScreen(value - oldExercise);
            } else if (value < oldExercise) {
                // Less exercise ‚Üí reduce screen time
                adjustScreen(value - oldExercise);
            }
            render();
        }

        function adjustExercise(amount) {
            // Add exercise to cover the cost
            const newExercise = state.exercise + amount;
            // Find closest valid option >= newExercise
            state.exercise = EXERCISE_OPTIONS.find(e => e >= newExercise) || MAX_EXERCISE;
        }

        function adjustScreen(exerciseChange) {
            // Convert exercise minutes to screen steps (15 min ‚âà 1 step)
            const screenSteps = Math.round(exerciseChange / 15);
            const currentIndex = SCREEN_OPTIONS.indexOf(state.screen);
            const newIndex = Math.max(0, Math.min(SCREEN_OPTIONS.length - 1, currentIndex + screenSteps));
            state.screen = SCREEN_OPTIONS[newIndex];
        }

        function render() {
            // Update selected states
            document.querySelectorAll('#exercise-options .option').forEach(opt => {
                opt.classList.toggle('selected', parseInt(opt.dataset.value) === state.exercise);
            });
            document.querySelectorAll('#screen-options .option').forEach(opt => {
                opt.classList.toggle('selected', parseInt(opt.dataset.value) === state.screen);
            });
            document.querySelectorAll('#sugar-options .option').forEach(opt => {
                opt.classList.toggle('selected', parseInt(opt.dataset.value) === state.sugar);
            });

            // Update values
            document.getElementById('exercise-value').textContent = state.exercise === 0 ? '0' : `${state.exercise} min`;
            document.getElementById('screen-value').textContent = formatTime(state.screen);
            document.getElementById('sugar-value').textContent = state.sugar;

            // Show warning for 2.5hr+ screen time
            document.getElementById('screen-warning').classList.toggle('show', state.screen >= 150);
        }

        function formatTime(min) {
            if (min === 0) return '0';
            if (min < 60) return `${min}m`;
            const h = min / 60;
            return h % 1 === 0 ? `${h} hour${h > 1 ? 's' : ''}` : `${h}hr`;
        }

        function reset() {
            state = { exercise: 30, screen: 120, sugar: 1 };
            render();
        }

        init();
    </script>
</body>
</html>
